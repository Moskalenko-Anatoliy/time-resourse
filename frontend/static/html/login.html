<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/src/css/normalize.css">
  <link rel="stylesheet" href="/src/css/reset.css">    
  <link rel="stylesheet" href="/src/css/style.css"> 
  <link rel="stylesheet" href="/src/css/login.css">     
</head>
<body>
  <h2>Система управления временными ресурсами</h2>
  <form id="form-elem" class="login-form">
    <div class="login-container">
      <section>
          <label for="login">Логин</label>
          <input class="login-input" id="login" name="login" type="text" autocomplete="login" required autofocus>
      </section>
      <section>
          <label for="current-password">Пароль</label>
          <input class="login-input" id="current-password" name="password" type="password" autocomplete="current-password" required>
      </section>
      <button class="login-button" type="submit">Войти</button>
      <script>
        const btn = document.querySelector('.login-button');

        btn.addEventListener('click', async (e) => {
          e.preventDefault();

          const response = await fetch('http://localhost:3300/api/auth/login', {
            method: "POST",
            headers: {
                Accept: "application/json",
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
              'login': document.querySelector('#login').value,
              'password': document.querySelector('#current-password').value,
            })
          });
          const result = await response.json();

          console.log(result)

          sessionStorage.setItem('accessToken', result.accessToken);
          sessionStorage.setItem('refreshToken', result.refreshToken);  
          
          //window.location.replace('/src/html/tasks.html')
        });
                 
      </script>
    </div>
  </form>  
  
</body>
</html>
